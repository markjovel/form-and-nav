<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BrightSmile Dental Clinic</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <h1 class="logo">BrightSmile Dental Clinic</h1>
      <nav class="nav" id="mainNav">
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="appointment.html">Appointment</a>
        <a href="#records">Records</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="navToggle">☰</button>
    </div>
  </header>




  <section id="appointment" class="container appointment">
  <h3>Book an Appointment</h3>
  <form id="appointmentForm" class="form">
    <div class="row">
      <label>Full name<input type="text" id="name" required></label>
      <label>Email<input type="email" id="email" required></label>
    </div>
    <div class="row">
      <label>Phone<input type="tel" id="phone"></label>
      <label>Date<input type="date" id="date" required></label>
    </div>
    <div class="row">
      <label>Time<input type="time" id="time"></label>
    </div>
    <label>Reason / Notes<textarea id="message" rows="3"></textarea></label>
    <div class="form-actions">
      <button type="submit" class="btn">Submit Appointment</button>
      <button type="button" id="clearBtn" class="btn ghost">Clear Form</button>
    </div>
  </form>
  <p class="note">Appointments are stored locally in your browser (localStorage). Use the Records tab to view, edit or delete entries.</p>
</section>

    <section id="records" class="container records">
  <h3>Appointment Records</h3>
  
  <div class="records-controls">
    <input id="search" placeholder="Search by name or email">
    <button id="exportBtn" class="btn small">Export CSV</button>
    <button id="clearAllBtn" class="btn small ghost">Clear All</button>
  </div>
  
  <div class="table-wrap">
    <table id="recordsTable" aria-live="polite">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Date</th>
          <th>Time</th>
          <th>Notes</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

 
  <footer class="site-footer">
    <div class="container">
      <p>© <span id="year"></span> BrightSmile Dental Clinic — All rights reserved.</p>
    </div>
  </footer>

  <template id="rowTemplate">
    <tr>
      <td class="idx"></td>
      <td class="tname"></td>
      <td class="temail"></td>
      <td class="tphone"></td>
      <td class="tdate"></td>
      <td class="ttime"></td>
      <td class="tnote"></td>
      <td class="tactions">
        <button class="btn tiny edit">Edit</button>
        <button class="btn tiny danger delete">Delete</button>
      </td>
    </tr>
  </template>

  <script>
    // Basic interactivity and localStorage appointment management
    const form = document.getElementById('appointmentForm');
    const recordsKey = 'brightsmile_appointments_v1';
    const tbody = document.querySelector('#recordsTable tbody');
    const template = document.getElementById('rowTemplate');
    const search = document.getElementById('search');
    const yearSpan = document.getElementById('year');
    yearSpan.textContent = new Date().getFullYear();

    function loadRecords() {
      const raw = localStorage.getItem(recordsKey);
      return raw ? JSON.parse(raw) : [];
    }
    function saveRecords(list) {
      localStorage.setItem(recordsKey, JSON.stringify(list));
    }

    function renderRecords(filter = ''){
      const list = loadRecords();
      tbody.innerHTML = '';
      const filtered = list.filter(r => {
        if(!filter) return true;
        const s = filter.toLowerCase();
        return (r.name||'').toLowerCase().includes(s) || (r.email||'').toLowerCase().includes(s);
      });
      filtered.forEach((r, i) => {
        const tr = template.content.cloneNode(true);
        tr.querySelector('.idx').textContent = i+1;
        tr.querySelector('.tname').textContent = r.name;
        tr.querySelector('.temail').textContent = r.email;
        tr.querySelector('.tphone').textContent = r.phone || '';
        tr.querySelector('.tdate').textContent = r.date || '';
        tr.querySelector('.ttime').textContent = r.time || '';
        tr.querySelector('.tnote').textContent = r.message || '';
        const editBtn = tr.querySelector('.edit');
        const deleteBtn = tr.querySelector('.delete');
        editBtn.addEventListener('click', ()=> editRecord(r.id));
        deleteBtn.addEventListener('click', ()=> deleteRecord(r.id));
        tbody.appendChild(tr);
      });
    }

    function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,7); }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const record = {
        id: uid(),
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        date: document.getElementById('date').value,
        time: document.getElementById('time').value,
        message: document.getElementById('message').value.trim()
      };
      const list = loadRecords();
      list.push(record);
      saveRecords(list);
      form.reset();
      renderRecords(search.value);
      // move to records section
      location.hash = '#records';
    });

    document.getElementById('clearBtn').addEventListener('click', ()=> form.reset());

    function editRecord(id){
      const list = loadRecords();
      const r = list.find(x=>x.id===id);
      if(!r) return alert('Record not found');
      // populate form for editing (simple flow: delete old, user submits new)
      document.getElementById('name').value = r.name;
      document.getElementById('email').value = r.email;
      document.getElementById('phone').value = r.phone;
      document.getElementById('date').value = r.date;
      document.getElementById('time').value = r.time;
      document.getElementById('message').value = r.message;
      // remove existing record so submit will create updated one
      const newList = list.filter(x=>x.id!==id);
      saveRecords(newList);
      renderRecords(search.value);
      location.hash = '#appointment';
    }

    function deleteRecord(id){
      if(!confirm('Delete this appointment?')) return;
      const list = loadRecords().filter(x=>x.id!==id);
      saveRecords(list);
      renderRecords(search.value);
    }

    document.getElementById('exportBtn').addEventListener('click', ()=>{
      const list = loadRecords();
      if(!list.length) return alert('No records to export');
      const hdr = ['id','name','email','phone','date','time','message'];
      const rows = list.map(r => hdr.map(h => '"'+(r[h]??'')+'"').join(','));
      const csv = [hdr.join(','), ...rows].join('\n');
      const blob = new Blob([csv], {type: 'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'appointments.csv';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    document.getElementById('clearAllBtn').addEventListener('click', ()=>{
      if(!confirm('Clear ALL appointment records?')) return;
      localStorage.removeItem(recordsKey);
      renderRecords();
    });

    search.addEventListener('input', ()=> renderRecords(search.value));

    // contact form (example: doesn't send anywhere, just demo)
    document.getElementById('contactForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      alert('Message sent. Thank you!');
      e.target.reset();
    });

    // nav toggle for small screens
    document.getElementById('navToggle').addEventListener('click', ()=>{
      document.getElementById('mainNav').classList.toggle('open');
    });

    // set focus to search when records hash
    window.addEventListener('hashchange', ()=>{
      if(location.hash === '#records') search.focus();
    });

    // initial render
    renderRecords();
  </script>




